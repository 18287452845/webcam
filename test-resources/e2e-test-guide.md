# 端到端流程测试指南

本文档描述如何执行端到端（E2E）流程测试。

## 前置条件

1. 后端服务已启动并运行在 `http://localhost:8080`
2. 使用现代浏览器（Chrome、Firefox、Edge等）
3. 准备测试图片：
   - 有人脸的照片（用于成功流程测试）
   - 无人脸的照片（用于错误流程测试）

## 测试用例

### TC-E2E-001: 完整成功流程

**测试目标：** 验证从首页到结果页面的完整用户操作流程

**测试步骤：**

1. **访问首页**
   - 打开浏览器，访问 `http://localhost:8080/index.html`
   - 验证页面正常显示

2. **选择性别**
   - 点击"我是男生"或"我是女生"卡片
   - 验证页面跳转到 `capture.html`

3. **进入拍照页**
   - 验证摄像头权限请求
   - 允许摄像头访问
   - 验证视频流正常显示

4. **拍照或上传图片**
   - 方式A：点击"立即拍照"按钮进行拍照
   - 方式B：点击"上传图片"，选择一张有人脸的照片
   - 验证图片被发送到后端

5. **等待识别完成**
   - 观察页面显示"识别中..."
   - 等待后端处理完成

6. **查看结果页面**
   - 验证页面自动跳转到结果页面
   - 验证结果页面正确显示识别结果
   - 验证显示的信息包括：
     - 上传的图片
     - 性别、年龄等属性
     - 匹配的图片
     - 描述信息

**预期结果：**
- 整个流程无错误
- 所有页面跳转正常
- 数据正确传递和显示
- 没有JavaScript错误

**实际结果：** [ ] PASS [ ] FAIL

**测试数据：**
- 使用的图片：
- 识别结果：
- 处理时间：

**备注：**

---

### TC-E2E-002: 错误恢复流程

**测试目标：** 验证错误处理和恢复机制

**测试步骤：**

1. **拍照后识别失败**
   - 访问首页并进入拍照页
   - 上传一张无人脸的照片（如风景照）
   - 等待识别完成

2. **显示错误提示**
   - 验证页面显示错误信息
   - 验证错误信息清晰明确
   - 验证倒计时区域显示错误

3. **自动返回首页**
   - 等待3秒
   - 验证页面自动跳转回首页

4. **重新开始流程**
   - 验证可以重新选择性别
   - 验证可以重新进入拍照页
   - 验证系统恢复正常工作

**预期结果：**
- 错误提示清晰明确
- 系统能够自动恢复到初始状态
- 用户可以重新开始操作
- 没有系统崩溃或异常

**实际结果：** [ ] PASS [ ] FAIL

**测试数据：**
- 使用的图片：
- 错误信息：

**备注：**

---

## 性能测试

### TC-PERF-001: API响应时间

**测试步骤：**
1. 使用浏览器开发者工具的网络面板
2. 执行一次完整的识别流程
3. 记录API调用时间

**预期结果：**
- API响应时间 < 5秒（不含阿里云百炼API调用时间）
- 总页面加载时间 < 10秒

**实际结果：** [ ] PASS [ ] FAIL

**数据记录：**
- API响应时间：_____ 秒
- 总处理时间：_____ 秒

---

### TC-PERF-002: 并发请求测试

**测试步骤：**
1. 同时打开多个浏览器标签页
2. 在不同标签页中同时上传图片
3. 观察系统响应

**预期结果：**
- 系统能够处理并发请求
- 每个请求都能得到正确响应
- 没有请求丢失或错误

**实际结果：** [ ] PASS [ ] FAIL

**备注：**

---

## 边界条件测试

### TC-BOUNDARY-001: 大图片测试

**测试步骤：**
1. 上传一张大于5MB的图片
2. 观察系统响应

**预期结果：**
- 如果图片 > 10MB，应该显示错误提示
- 如果图片在限制内，应该正常处理

**实际结果：** [ ] PASS [ ] FAIL

---

### TC-BOUNDARY-002: 不同格式图片

**测试步骤：**
1. 分别测试JPG、PNG、GIF等格式的图片
2. 观察系统响应

**预期结果：**
- 支持JPG和PNG格式
- 不支持格式应该显示错误

**实际结果：** [ ] PASS [ ] FAIL

---

## 测试结果汇总

| 测试用例ID | 测试名称 | 状态 | 备注 |
|-----------|---------|------|------|
| TC-E2E-001 | 完整成功流程 | | |
| TC-E2E-002 | 错误恢复流程 | | |
| TC-PERF-001 | API响应时间 | | |
| TC-PERF-002 | 并发请求测试 | | |
| TC-BOUNDARY-001 | 大图片测试 | | |
| TC-BOUNDARY-002 | 不同格式图片 | | |

**测试执行人：** _____________  
**测试日期：** _____________  
**测试环境：** _____________  

## 注意事项

1. 测试时请记录每个步骤的时间
2. 如有错误，请截图并记录详细的错误信息
3. 检查浏览器控制台的网络请求和响应
4. 验证数据在前后端之间的正确传递

